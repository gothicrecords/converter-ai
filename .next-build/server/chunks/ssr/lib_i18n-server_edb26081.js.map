{"version":3,"sources":["../../../../lib/i18n-server.js"],"sourcesContent":["import fs from 'fs';\r\nimport path from 'path';\r\n\r\nfunction stripBOM(content) {\r\n  if (!content) return content;\r\n  // Remove UTF-8 BOM if present\r\n  return content.charCodeAt(0) === 0xFEFF ? content.slice(1) : content.replace(/^\\uFEFF/, '');\r\n}\r\n\r\n// Helper per caricare traduzioni server-side\r\nexport async function loadTranslationsSSR(locale = 'en') {\r\n  try {\r\n    const filePath = path.join(process.cwd(), 'public', 'locales', locale, 'common.json');\r\n    const fileContents = fs.readFileSync(filePath, 'utf8');\r\n    const clean = stripBOM(fileContents);\r\n    return JSON.parse(clean);\r\n  } catch (error) {\r\n    console.error('Error loading translations SSR:', error);\r\n    // Fallback to English\r\n    if (locale !== 'en') {\r\n      return loadTranslationsSSR('en');\r\n    }\r\n    return {};\r\n  }\r\n}\r\n"],"names":[],"mappings":"wCAAA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QASO,eAAe,EAAoB,EAAS,IAAI,EACrD,GAAI,OACF,IAAM,EAAW,EAAA,OAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,GAAI,SAAU,UAAW,EAAQ,eAEjE,EAVR,CADgB,EAUO,CATnB,CAAC,AASkB,CACP,EAXO,IAUE,CAAC,CATZ,CAUW,UADa,CAAC,EAAU,SAPhB,QAA1B,EAAQ,UAAU,CAAC,GAAgB,EAAQ,KAAK,CAAC,GAAK,EAAQ,OAAO,CAAC,UAAW,IAFnE,EAWnB,OAAO,KAAK,KAAK,CAAC,EACpB,CAAE,MAAO,EAAO,CAGd,GAFA,QAAQ,KAAK,CAAC,kCAAmC,GAElC,MAAM,CAAjB,EACF,OAAO,EAAoB,MAE7B,MAAO,CAAC,CACV,CACF"}