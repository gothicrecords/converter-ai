module.exports=[270406,(e,t,s)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},814747,(e,t,s)=>{t.exports=e.x("path",()=>require("path"))},515954,e=>{"use strict";class t extends Error{constructor(e,t=500,s=null,r=null,a=null){super(e),this.name=this.constructor.name,this.statusCode=t,this.code=s,this.details=r,this.originalError=a,this.timestamp=new Date().toISOString(),this.requestId=null,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}toJSON(){return{name:this.name,message:this.message,statusCode:this.statusCode,code:this.code,details:this.details,timestamp:this.timestamp,requestId:this.requestId,stack:this.stack}}}class s extends t{constructor(e,t=null){super(e,400,"VALIDATION_ERROR",t)}}class r extends t{constructor(e="Authentication required"){super(e,401,"AUTHENTICATION_ERROR")}}class a extends t{constructor(e){super(e,409,"CONFLICT")}}class n extends t{constructor(e,t=null){super(e,500,"FILE_SYSTEM_ERROR",null,t)}}class o extends t{constructor(e,t=null){super(e,503,"NETWORK_ERROR",null,t)}}class i extends t{constructor(e="Request timeout",t=null){super(e,408,"TIMEOUT_ERROR",t?{timeoutMs:t}:null)}}class l extends t{constructor(e,t=null){super(`File too large. Maximum size is ${function(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}(e)}`,413,"FILE_TOO_LARGE",{maxSize:e,actualSize:t})}}class c extends t{constructor(e=null){super(e?`Invalid file type. Allowed types: ${e.join(", ")}`:"Invalid file type",400,"INVALID_FILE_TYPE",{allowedTypes:e})}}class u extends t{constructor(e,t=null){super(e,500,"PROCESSING_ERROR",null,t)}}async function d(s,r={}){let a={timestamp:new Date().toISOString(),error:s instanceof t?s.toJSON():{name:s.name,message:s.message,stack:s.stack},context:r,environment:"production"};s instanceof t&&s.statusCode<500?console.warn("Client Error:",JSON.stringify(a,null,2)):console.error("Server Error:",JSON.stringify(a,null,2));try{let{default:t}=await e.A(139867),{log:a}=await e.A(970795);await t.trackError(s,r),a.error("Error logged",s,r)}catch(e){console.warn("Error tracker not available:",e.message)}return process.env.ERROR_TRACKING_ENABLED,a}function p(e,t=!1,s=!0){let r={error:e.message||"Internal server error",code:e.code||"INTERNAL_ERROR"};return s&&e.details&&(r.details=e.details),(t||0)&&(r.stack=e.stack),e.requestId&&(r.requestId=e.requestId),e.timestamp&&(r.timestamp=e.timestamp),r}async function m(e,r,a={}){return(await d(e,a),r.headersSent)?void 0:(r.setHeader("Access-Control-Allow-Origin","*"),r.setHeader("Access-Control-Allow-Methods","POST, OPTIONS"),r.setHeader("Access-Control-Allow-Headers","Content-Type"),r.setHeader("Access-Control-Max-Age","86400"),e instanceof t)?r.status(e.statusCode).json(p(e,!1,!0)):"ValidationError"===e.name||"CastError"===e.name?r.status(400).json(p(new s(e.message,e.errors),!1)):"ECONNREFUSED"===e.code||"ETIMEDOUT"===e.code?r.status(503).json(p(new o("Database connection failed",e),!1)):"ENOENT"===e.code||"EACCES"===e.code||"EMFILE"===e.code?r.status(500).json(p(new n("File system operation failed",e),!1)):e.message&&(e.message.includes("timeout")||e.message.includes("ETIMEDOUT"))?r.status(408).json(p(new i("Request timeout",e.timeout),!1)):"LIMIT_FILE_SIZE"===e.code||e.message?.includes("too large")?r.status(413).json(p(new l,!1)):void r.status(500).json(p(new t("Internal server error",500,"INTERNAL_ERROR",null,e),!1))}e.s(["AuthenticationError",()=>r,"ConflictError",()=>a,"FileSystemError",()=>n,"FileTooLargeError",()=>l,"InvalidFileTypeError",()=>c,"ProcessingError",()=>u,"TimeoutError",()=>i,"ValidationError",()=>s,"handleApiError",()=>m])},446786,(e,t,s)=>{t.exports=e.x("os",()=>require("os"))},955631,e=>{"use strict";var t=e.i(926747),s=e.i(190406),r=e.i(244898),a=e.i(262950),n=e.i(910479),o=e.i(327408),i=e.i(515954);async function l(e,t){if("GET"!==e.method)return t.setHeader("Allow","GET"),t.status(405).json({error:"Method not allowed"});try{let s,{type:r="full"}=e.query;switch(r){case"health":let a=await n.default.runAllChecks();s={status:a.overall,timestamp:a.timestamp,checks:Object.keys(a.checks).reduce((e,t)=>(e[t]={status:a.checks[t].status,message:a.checks[t].message},e),{})};break;case"errors":let i=o.default.getStats();s={timestamp:new Date().toISOString(),...i};break;case"system":let l=await n.default.getSystemInfo();s={timestamp:new Date().toISOString(),system:l};break;default:s=await n.default.getFullDiagnostics()}return t.setHeader("Cache-Control","no-store, no-cache, must-revalidate"),t.setHeader("Pragma","no-cache"),t.setHeader("Expires","0"),t.status(200).json(s)}catch(s){return(0,i.handleApiError)(s,t,{endpoint:"/api/diagnostics-enhanced",method:e.method})}}e.s(["config",0,{api:{responseLimit:!1}},"default",()=>l],639237);var c=e.i(639237),u=e.i(7031),d=e.i(181927),p=e.i(846432);let m=(0,a.hoist)(c,"default"),h=(0,a.hoist)(c,"config"),E=new r.PagesAPIRouteModule({definition:{kind:s.RouteKind.PAGES_API,page:"/api/diagnostics-enhanced",pathname:"/api/diagnostics-enhanced",bundlePath:"",filename:""},userland:c,distDir:".next-build",relativeProjectDir:""});async function g(e,s,r){E.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/diagnostics-enhanced";a=a.replace(/\/index$/,"")||"/";let n=await E.prepare(e,s,{srcPage:a});if(!n){s.statusCode=400,s.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve());return}let{query:o,params:i,prerenderManifest:l,routerServerContext:c}=n;try{let t=e.method||"GET",r=(0,u.getTracer)(),n=r.getActiveScopeSpan(),p=E.instrumentationOnRequestError.bind(E),m=async n=>E.render(e,s,{query:{...o,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:E.isDev,page:"/api/diagnostics-enhanced",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>p(e,...t)}).finally(()=>{if(!n)return;n.setAttributes({"http.status_code":s.statusCode,"next.rsc":!1});let e=r.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=e.get("next.route");if(o){let e=`${t} ${o}`;n.setAttributes({"next.route":o,"http.route":o,"next.span_name":e}),n.updateName(e)}else n.updateName(`${t} ${a}`)});n?await m(n):await r.withPropagatedContext(e.headers,()=>r.trace(d.BaseServerSpan.handleRequest,{spanName:`${t} ${a}`,kind:u.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},m))}catch(e){if(E.isDev)throw e;(0,t.sendError)(s,500,"Internal Server Error")}finally{null==r.waitUntil||r.waitUntil.call(r,Promise.resolve())}}e.s(["config",0,h,"default",0,m,"handler",()=>g],955631)},831636,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_@supabase_supabase-js_71badcb7._.js"].map(t=>e.l(t))).then(()=>t(194131)))},139867,e=>{e.v(e=>Promise.resolve().then(()=>e(327408)))},970795,e=>{e.v(e=>Promise.resolve().then(()=>e(328112)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__01a589c0._.js.map