{"version":3,"sources":["../../../node_modules/next/dist/esm/build/templates/pages-api.js","../../../lib/supportKnowledgeBase.js","../../../pages/api/support/chat.js"],"sourcesContent":["import { sendError } from \"next/dist/esm/server/api-utils\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { PagesAPIRouteModule } from \"next/dist/esm/server/route-modules/pages-api/module.compiled\";\nimport { hoist } from \"next/dist/esm/build/templates/helpers\";\n// Import the userland code.\nimport * as userland from \"INNER_PAGE\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { addRequestMeta } from \"next/dist/esm/server/request-meta\";\n// Re-export the handler (should be the default export).\nexport default hoist(userland, 'default');\n// Re-export config.\nexport const config = hoist(userland, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new PagesAPIRouteModule({\n    definition: {\n        kind: RouteKind.PAGES_API,\n        page: \"/api/support/chat\",\n        pathname: \"/api/support/chat\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland,\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || ''\n});\nexport async function handler(req, res, ctx) {\n    if (routeModule.isDev) {\n        addRequestMeta(req, 'devRequestTimingInternalsEnd', process.hrtime.bigint());\n    }\n    let srcPage = \"/api/support/chat\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    }\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return;\n    }\n    const { query, params, prerenderManifest, routerServerContext } = prepareResult;\n    try {\n        const method = req.method || 'GET';\n        const tracer = getTracer();\n        const activeSpan = tracer.getActiveScopeSpan();\n        const onRequestError = routeModule.instrumentationOnRequestError.bind(routeModule);\n        const invokeRouteModule = async (span)=>routeModule.render(req, res, {\n                query: {\n                    ...query,\n                    ...params\n                },\n                params,\n                allowedRevalidateHeaderKeys: process.env.__NEXT_ALLOWED_REVALIDATE_HEADERS,\n                multiZoneDraftMode: Boolean(process.env.__NEXT_MULTI_ZONE_DRAFT_MODE),\n                trustHostHeader: process.env.__NEXT_TRUST_HOST_HEADER,\n                // TODO: get this from from runtime env so manifest\n                // doesn't need to load\n                previewProps: prerenderManifest.preview,\n                propagateError: false,\n                dev: routeModule.isDev,\n                page: \"/api/support/chat\",\n                internalRevalidate: routerServerContext == null ? void 0 : routerServerContext.revalidate,\n                onError: (...args)=>onRequestError(req, ...args)\n            }).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${srcPage}`);\n                }\n            });\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await invokeRouteModule(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${srcPage}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, invokeRouteModule));\n        }\n    } catch (err) {\n        // we re-throw in dev to show the error overlay\n        if (routeModule.isDev) {\n            throw err;\n        }\n        // this is technically an invariant as error handling\n        // should be done inside of api-resolver onError\n        sendError(res, 500, 'Internal Server Error');\n    } finally{\n        // We don't allow any waitUntil work in pages API routes currently\n        // so if callback is present return with resolved promise since no\n        // pending work\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n    }\n}\n\n//# sourceMappingURL=pages-api.js.map\n","// Base di conoscenza per il supporto - FAQ e risposte intelligenti\r\n\r\nexport const supportCategories = {\r\n  general: 'Generale',\r\n  tools: 'Strumenti',\r\n  account: 'Account',\r\n  billing: 'Fatturazione',\r\n  technical: 'Tecnico',\r\n  features: 'Funzionalit√†'\r\n};\r\n\r\nexport const faqDatabase = [\r\n  // Generale\r\n  {\r\n    id: 'faq-1',\r\n    category: 'general',\r\n    question: 'Cos\\'√® MegaPixelAI?',\r\n    answer: 'MegaPixelAI √® una piattaforma completa di strumenti AI per immagini, documenti, video e audio. Offriamo upscaling immagini, rimozione sfondo, OCR avanzato, conversione file, e molto altro.',\r\n    keywords: ['cosa', 'cos\\'√®', 'megapixel', 'piattaforma', 'strumenti'],\r\n    relatedTools: ['upscaler', 'background-remover', 'ocr']\r\n  },\r\n  {\r\n    id: 'faq-2',\r\n    category: 'general',\r\n    question: 'Come funziona?',\r\n    answer: '√à semplice! Carica il tuo file, scegli lo strumento che preferisci, e ottieni il risultato in pochi secondi. Tutti i processi avvengono in modo sicuro e privato.',\r\n    keywords: ['come', 'funziona', 'usare', 'utilizzare', 'processo'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-3',\r\n    category: 'general',\r\n    question: '√à gratuito?',\r\n    answer: 'Offriamo un piano gratuito con funzionalit√† base. Per funzionalit√† avanzate e maggiore velocit√†, puoi passare a un piano Pro. Visita la pagina Pricing per maggiori dettagli.',\r\n    keywords: ['gratuito', 'prezzo', 'costo', 'piano', 'abbonamento', 'free'],\r\n    relatedTools: []\r\n  },\r\n\r\n  // Strumenti\r\n  {\r\n    id: 'faq-4',\r\n    category: 'tools',\r\n    question: 'Quali formati di file sono supportati?',\r\n    answer: 'Supportiamo un\\'ampia gamma di formati:\\n\\n**Immagini:** JPG, PNG, WEBP, GIF, BMP, TIFF\\n**Documenti:** PDF, DOCX, DOC, TXT, RTF\\n**Fogli di calcolo:** XLSX, XLS, CSV\\n**Presentazioni:** PPTX, PPT\\n**Video:** MP4, AVI, MOV, MKV\\n**Audio:** MP3, WAV, OGG, FLAC\\n**Archivi:** ZIP, RAR, 7Z, TAR',\r\n    keywords: ['formati', 'formato', 'supportati', 'file', 'tipi', 'estensioni'],\r\n    relatedTools: ['pdf-converter', 'generic-converter']\r\n  },\r\n  {\r\n    id: 'faq-5',\r\n    category: 'tools',\r\n    question: 'Come funziona l\\'upscaling delle immagini?',\r\n    answer: 'Il nostro upscaler AI utilizza algoritmi avanzati di deep learning per aumentare la risoluzione delle immagini fino a 4x mantenendo la qualit√†. Basta caricare l\\'immagine e scegliere il fattore di upscaling desiderato.',\r\n    keywords: ['upscale', 'upscaling', 'risoluzione', 'immagine', 'qualit√†', 'ingrandire'],\r\n    relatedTools: ['upscaler']\r\n  },\r\n  {\r\n    id: 'faq-6',\r\n    category: 'tools',\r\n    question: 'Posso rimuovere lo sfondo da qualsiasi immagine?',\r\n    answer: 'S√¨! Il nostro strumento di rimozione sfondo AI funziona con qualsiasi immagine. Funziona meglio con immagini che hanno un soggetto chiaro e uno sfondo contrastante.',\r\n    keywords: ['sfondo', 'rimuovere', 'background', 'remove', 'trasparente'],\r\n    relatedTools: ['rimozione-sfondo-ai']\r\n  },\r\n  {\r\n    id: 'faq-7',\r\n    category: 'tools',\r\n    question: 'Come funziona l\\'OCR?',\r\n    answer: 'L\\'OCR (Optical Character Recognition) avanzato estrae testo da immagini, PDF scansionati e documenti. Supporta pi√π di 100 lingue e mantiene la formattazione quando possibile.',\r\n    keywords: ['ocr', 'testo', 'estrarre', 'immagine', 'pdf', 'scansionato'],\r\n    relatedTools: ['ocr-avanzato-ai']\r\n  },\r\n  {\r\n    id: 'faq-8',\r\n    category: 'tools',\r\n    question: 'Posso convertire pi√π file contemporaneamente?',\r\n    answer: 'S√¨! Molti strumenti supportano il batch processing. Puoi caricare pi√π file e processarli tutti in una volta. I risultati verranno forniti come download singoli o in un archivio ZIP.',\r\n    keywords: ['batch', 'multipli', 'pi√π file', 'contemporaneamente', 'bulk'],\r\n    relatedTools: ['combina-splitta-pdf', 'generic-converter']\r\n  },\r\n\r\n  // Account\r\n  {\r\n    id: 'faq-9',\r\n    category: 'account',\r\n    question: 'Come creo un account?',\r\n    answer: 'Clicca su \"Registrati\" in alto a destra, inserisci nome, email e password. Riceverai un\\'email di conferma. Una volta confermato, avrai accesso a tutte le funzionalit√†.',\r\n    keywords: ['account', 'registrarsi', 'signup', 'iscriversi', 'creare'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-10',\r\n    category: 'account',\r\n    question: 'Ho dimenticato la password',\r\n    answer: 'Vai alla pagina di login e clicca su \"Password dimenticata\". Inserisci la tua email e riceverai un link per reimpostare la password.',\r\n    keywords: ['password', 'dimenticata', 'reset', 'recuperare', 'forgot'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-11',\r\n    category: 'account',\r\n    question: 'Come elimino il mio account?',\r\n    answer: 'Vai alla Dashboard, sezione Impostazioni, e clicca su \"Elimina Account\". Conferma l\\'operazione. Nota: questa azione √® irreversibile.',\r\n    keywords: ['eliminare', 'cancellare', 'account', 'delete', 'rimuovere'],\r\n    relatedTools: []\r\n  },\r\n\r\n  // Fatturazione\r\n  {\r\n    id: 'faq-12',\r\n    category: 'billing',\r\n    question: 'Come funziona la fatturazione?',\r\n    answer: 'I piani Pro sono fatturati mensilmente o annualmente. Puoi cancellare in qualsiasi momento dalla Dashboard. Non ci sono costi nascosti o commissioni.',\r\n    keywords: ['fatturazione', 'billing', 'pagamento', 'piano', 'pro'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-13',\r\n    category: 'billing',\r\n    question: 'Posso cambiare piano?',\r\n    answer: 'S√¨! Puoi aggiornare o downgrade il tuo piano in qualsiasi momento dalla Dashboard. Le modifiche entrano in vigore immediatamente.',\r\n    keywords: ['cambiare', 'piano', 'upgrade', 'downgrade', 'modificare'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-14',\r\n    category: 'billing',\r\n    question: 'Cosa succede se supero i limiti del piano?',\r\n    answer: 'Riceverai una notifica quando ti avvicini ai limiti. Puoi aggiornare il piano o attendere il reset mensile. Alcune funzionalit√† potrebbero essere temporaneamente limitate.',\r\n    keywords: ['limiti', 'superare', 'quota', 'limite', 'esaurito'],\r\n    relatedTools: []\r\n  },\r\n\r\n  // Tecnico\r\n  {\r\n    id: 'faq-15',\r\n    category: 'technical',\r\n    question: 'I miei file sono sicuri?',\r\n    answer: 'Assolutamente s√¨! Tutti i file vengono processati in modo sicuro e vengono eliminati automaticamente dopo 24 ore. Non condividiamo mai i tuoi file con terze parti.',\r\n    keywords: ['sicurezza', 'privacy', 'sicuro', 'dati', 'protezione'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-16',\r\n    category: 'technical',\r\n    question: 'Qual √® la dimensione massima del file?',\r\n    answer: 'Il limite dipende dal piano:\\n- **Gratuito:** 10 MB per file\\n- **Pro:** 100 MB per file\\n- **Enterprise:** 500 MB per file\\n\\nPer file pi√π grandi, contattaci per soluzioni personalizzate.',\r\n    keywords: ['dimensione', 'dimensione massima', 'limite', 'size', 'mb'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-17',\r\n    category: 'technical',\r\n    question: 'Il processo √® veloce?',\r\n    answer: 'S√¨! La maggior parte dei processi viene completata in pochi secondi. I tempi dipendono dalla dimensione del file e dalla complessit√† dell\\'operazione. I piani Pro hanno priorit√† pi√π alta.',\r\n    keywords: ['velocit√†', 'veloce', 'tempo', 'quanto', 'lento'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-18',\r\n    category: 'technical',\r\n    question: 'Cosa succede se il processo fallisce?',\r\n    answer: 'Se un processo fallisce, riceverai un messaggio di errore con dettagli. Puoi riprovare gratuitamente. Se il problema persiste, contatta il supporto con i dettagli dell\\'errore.',\r\n    keywords: ['errore', 'fallito', 'problema', 'non funziona', 'bug'],\r\n    relatedTools: []\r\n  },\r\n\r\n  // Funzionalit√†\r\n  {\r\n    id: 'faq-19',\r\n    category: 'features',\r\n    question: 'Cosa sono i crediti?',\r\n    answer: 'I crediti sono unit√† di consumo per le operazioni AI. Ogni operazione consuma un certo numero di crediti in base alla complessit√†. I crediti si ricaricano mensilmente o puoi acquistarli.',\r\n    keywords: ['crediti', 'credits', 'consumo', 'unit√†'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-20',\r\n    category: 'features',\r\n    question: 'Posso usare l\\'API?',\r\n    answer: 'S√¨! Offriamo un\\'API pubblica per sviluppatori. Visita la sezione API nella Dashboard per ottenere la tua API key e la documentazione completa.',\r\n    keywords: ['api', 'sviluppatori', 'developer', 'integrazione'],\r\n    relatedTools: []\r\n  },\r\n  {\r\n    id: 'faq-21',\r\n    category: 'features',\r\n    question: 'C\\'√® un\\'app mobile?',\r\n    answer: 'Attualmente siamo disponibili solo come applicazione web responsive. Stiamo lavorando su app native iOS e Android. Iscriviti alla newsletter per essere aggiornato!',\r\n    keywords: ['mobile', 'app', 'ios', 'android', 'telefono'],\r\n    relatedTools: []\r\n  }\r\n];\r\n\r\n// Funzione per cercare nella base di conoscenza\r\nexport function searchKnowledgeBase(query) {\r\n  if (!query || query.trim().length < 2) {\r\n    return [];\r\n  }\r\n\r\n  const lowerQuery = query.toLowerCase().trim();\r\n  const words = lowerQuery.split(/\\s+/);\r\n\r\n  // Calcola score per ogni FAQ\r\n  const scoredFAQs = faqDatabase.map(faq => {\r\n    let score = 0;\r\n    const lowerQuestion = faq.question.toLowerCase();\r\n    const lowerAnswer = faq.answer.toLowerCase();\r\n    const lowerKeywords = faq.keywords.map(k => k.toLowerCase());\r\n\r\n    // Match esatto nella domanda (peso alto)\r\n    if (lowerQuestion.includes(lowerQuery)) {\r\n      score += 10;\r\n    }\r\n\r\n    // Match parziale nella domanda\r\n    words.forEach(word => {\r\n      if (lowerQuestion.includes(word)) {\r\n        score += 5;\r\n      }\r\n    });\r\n\r\n    // Match nelle keywords (peso medio)\r\n    words.forEach(word => {\r\n      if (lowerKeywords.some(k => k.includes(word) || lowerKeywords.includes(word))) {\r\n        score += 3;\r\n      }\r\n    });\r\n\r\n    // Match nella risposta (peso basso)\r\n    words.forEach(word => {\r\n      if (lowerAnswer.includes(word)) {\r\n        score += 1;\r\n      }\r\n    });\r\n\r\n    return { ...faq, score };\r\n  });\r\n\r\n  // Ordina per score e filtra\r\n  return scoredFAQs\r\n    .filter(faq => faq.score > 0)\r\n    .sort((a, b) => b.score - a.score)\r\n    .slice(0, 5); // Top 5 risultati\r\n}\r\n\r\n// Ottieni FAQ per categoria\r\nexport function getFAQsByCategory(category) {\r\n  return faqDatabase.filter(faq => faq.category === category);\r\n}\r\n\r\n// Ottieni suggerimenti basati su query\r\nexport function getSuggestions(query) {\r\n  if (!query || query.trim().length < 2) {\r\n    // Suggerimenti di default\r\n    return [\r\n      'Come funziona l\\'upscaling?',\r\n      'Quali formati sono supportati?',\r\n      'Come creo un account?',\r\n      'I miei file sono sicuri?',\r\n      'Quanto costa?'\r\n    ];\r\n  }\r\n\r\n  const results = searchKnowledgeBase(query);\r\n  return results.map(faq => faq.question);\r\n}\r\n\r\n// Ottieni FAQ correlata\r\nexport function getRelatedFAQs(faqId, limit = 3) {\r\n  const faq = faqDatabase.find(f => f.id === faqId);\r\n  if (!faq) return [];\r\n\r\n  // Cerca FAQ con stessa categoria o strumenti correlati\r\n  return faqDatabase\r\n    .filter(f => \r\n      f.id !== faqId && \r\n      (f.category === faq.category || \r\n       f.relatedTools.some(tool => faq.relatedTools.includes(tool)))\r\n    )\r\n    .slice(0, limit);\r\n}\r\n\r\n","// API endpoint per chat supporto AI\r\nimport { searchKnowledgeBase, getSuggestions, getRelatedFAQs } from '../../../lib/supportKnowledgeBase';\r\n\r\nexport default async function handler(req, res) {\r\n  if (req.method !== 'POST') {\r\n    return res.status(405).json({ error: 'Method not allowed' });\r\n  }\r\n\r\n  try {\r\n    const { message, context = [], conversationHistory = [] } = req.body;\r\n\r\n    if (!message || !message.trim()) {\r\n      return res.status(400).json({ error: 'Message is required' });\r\n    }\r\n\r\n    // Cerca nella base di conoscenza\r\n    const kbResults = searchKnowledgeBase(message);\r\n    \r\n    // Costruisci contesto dalla base di conoscenza\r\n    let knowledgeContext = '';\r\n    if (kbResults.length > 0) {\r\n      knowledgeContext = kbResults\r\n        .slice(0, 3)\r\n        .map((faq, idx) => `FAQ ${idx + 1}:\\nDomanda: ${faq.question}\\nRisposta: ${faq.answer}`)\r\n        .join('\\n\\n');\r\n    }\r\n\r\n    // Aggiungi contesto fornito\r\n    if (context.length > 0) {\r\n      const providedContext = context\r\n        .map((item, idx) => `Contesto ${idx + 1}:\\nDomanda: ${item.question}\\nRisposta: ${item.answer}`)\r\n        .join('\\n\\n');\r\n      knowledgeContext = knowledgeContext \r\n        ? `${knowledgeContext}\\n\\n${providedContext}`\r\n        : providedContext;\r\n    }\r\n\r\n    // Costruisci prompt per AI\r\n    const systemPrompt = `Sei un assistente virtuale esperto e amichevole per MegaPixelAI, una piattaforma di strumenti AI.\r\n\r\nLa tua missione √®:\r\n1. Rispondere alle domande degli utenti in modo chiaro, conciso e utile\r\n2. Utilizzare la base di conoscenza fornita per dare risposte accurate\r\n3. Suggerire strumenti e funzionalit√† rilevanti quando appropriato\r\n4. Essere professionale ma amichevole\r\n5. Se non conosci la risposta, ammettilo e suggerisci di contattare il supporto\r\n\r\n${knowledgeContext ? `\\nBase di conoscenza:\\n${knowledgeContext}` : ''}\r\n\r\nRispondi sempre in italiano, a meno che l'utente non chieda esplicitamente in un'altra lingua.\r\nMantieni le risposte concise ma complete (max 200 parole).\r\nUsa formattazione markdown quando utile (**, liste, etc.).`;\r\n\r\n    const userPrompt = `Domanda dell'utente: ${message}`;\r\n\r\n    // Simula risposta AI (in produzione, usa OpenAI o altro servizio)\r\n    // TODO: Integrare con OpenAI quando disponibile\r\n    let aiResponse = generateAIResponse(message, knowledgeContext, conversationHistory);\r\n\r\n    // Ottieni FAQ correlate\r\n    const relatedFAQs = kbResults.length > 0 \r\n      ? getRelatedFAQs(kbResults[0].id, 2)\r\n      : [];\r\n\r\n    // Genera suggerimenti\r\n    const suggestions = getSuggestions(message).slice(0, 3);\r\n\r\n    // Se la risposta √® basata su FAQ, migliorala\r\n    if (kbResults.length > 0 && kbResults[0].score > 5) {\r\n      aiResponse = `**${kbResults[0].question}**\\n\\n${kbResults[0].answer}\\n\\n${aiResponse}`;\r\n    }\r\n\r\n    return res.status(200).json({\r\n      success: true,\r\n      response: aiResponse,\r\n      relatedFAQs: relatedFAQs.map(faq => ({\r\n        id: faq.id,\r\n        question: faq.question,\r\n        answer: faq.answer\r\n      })),\r\n      suggestions,\r\n      confidence: kbResults.length > 0 ? Math.min(kbResults[0].score / 10, 1) : 0.5\r\n    });\r\n\r\n  } catch (error) {\r\n    console.error('Support chat API error:', error);\r\n    return res.status(500).json({ \r\n      error: 'Errore interno del server',\r\n      message: error.message \r\n    });\r\n  }\r\n}\r\n\r\n// Funzione per generare risposta AI (fallback quando OpenAI non √® disponibile)\r\nfunction generateAIResponse(message, knowledgeContext, conversationHistory) {\r\n  const lowerMessage = message.toLowerCase();\r\n\r\n  // Pattern matching intelligente\r\n  if (lowerMessage.includes('ciao') || lowerMessage.includes('salve') || lowerMessage.includes('buongiorno')) {\r\n    return 'Ciao! üëã Sono qui per aiutarti. Come posso assisterti oggi?';\r\n  }\r\n\r\n  if (lowerMessage.includes('grazie') || lowerMessage.includes('grazie mille')) {\r\n    return 'Prego! Sono felice di aver potuto aiutarti. Se hai altre domande, sono qui! üòä';\r\n  }\r\n\r\n  if (lowerMessage.includes('prezzo') || lowerMessage.includes('costo') || lowerMessage.includes('quanto costa')) {\r\n    return 'Offriamo diversi piani:\\n\\n‚Ä¢ **Gratuito**: Funzionalit√† base\\n‚Ä¢ **Pro**: Funzionalit√† avanzate e priorit√†\\n‚Ä¢ **Enterprise**: Soluzioni personalizzate\\n\\nVisita la pagina Pricing per maggiori dettagli!';\r\n  }\r\n\r\n  if (lowerMessage.includes('formato') || lowerMessage.includes('supporta')) {\r\n    return 'Supportiamo molti formati:\\n\\n**Immagini:** JPG, PNG, WEBP, GIF\\n**Documenti:** PDF, DOCX, TXT\\n**Video:** MP4, AVI, MOV\\n**Audio:** MP3, WAV, OGG\\n\\nE molti altri! Quale formato ti interessa?';\r\n  }\r\n\r\n  if (lowerMessage.includes('sicuro') || lowerMessage.includes('privacy') || lowerMessage.includes('dati')) {\r\n    return 'La sicurezza √® la nostra priorit√†! üîí\\n\\n‚Ä¢ I tuoi file vengono processati in modo sicuro\\n‚Ä¢ Eliminazione automatica dopo 24 ore\\n‚Ä¢ Nessuna condivisione con terze parti\\n‚Ä¢ Crittografia end-to-end\\n\\nI tuoi dati sono al sicuro con noi.';\r\n  }\r\n\r\n  if (lowerMessage.includes('errore') || lowerMessage.includes('problema') || lowerMessage.includes('non funziona')) {\r\n    return 'Mi dispiace per il problema! üòî\\n\\nProva questi passaggi:\\n1. Ricarica la pagina\\n2. Verifica la connessione internet\\n3. Controlla che il file sia nel formato corretto\\n4. Se il problema persiste, contatta il supporto con i dettagli dell\\'errore';\r\n  }\r\n\r\n  if (lowerMessage.includes('account') || lowerMessage.includes('registrarsi') || lowerMessage.includes('iscriversi')) {\r\n    return 'Per creare un account:\\n\\n1. Clicca su \"Registrati\" in alto a destra\\n2. Inserisci nome, email e password\\n3. Conferma l\\'email\\n4. Inizia a usare tutti gli strumenti!\\n\\n√à gratuito e veloce! üöÄ';\r\n  }\r\n\r\n  // Se c'√® contesto dalla base di conoscenza, usalo\r\n  if (knowledgeContext) {\r\n    // Estrai la prima risposta rilevante\r\n    const contextMatch = knowledgeContext.match(/Risposta: ([^\\n]+(?:\\n(?!FAQ|Contesto)[^\\n]+)*)/);\r\n    if (contextMatch) {\r\n      return `Basandomi sulla nostra base di conoscenza:\\n\\n${contextMatch[1]}\\n\\nSe hai bisogno di maggiori dettagli, chiedi pure!`;\r\n    }\r\n  }\r\n\r\n  // Risposta generica ma utile\r\n  return `Grazie per la tua domanda! ü§î\\n\\nHo cercato nella nostra base di conoscenza. Se la risposta non √® completa, posso aiutarti in altri modi:\\n\\n‚Ä¢ Cerca nelle FAQ usando il tab \"FAQ\"\\n‚Ä¢ Contatta il supporto diretto\\n‚Ä¢ Esplora gli strumenti disponibili\\n\\nCome posso aiutarti meglio?`;\r\n}\r\n\r\n"],"names":[],"mappings":"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","ignoreList":[0]}