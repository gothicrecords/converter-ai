module.exports=[270406,(e,t,r)=>{t.exports=e.x("next/dist/compiled/@opentelemetry/api",()=>require("next/dist/compiled/@opentelemetry/api"))},814747,(e,t,r)=>{t.exports=e.x("path",()=>require("path"))},515954,e=>{"use strict";class t extends Error{constructor(e,t=500,r=null,s=null,a=null){super(e),this.name=this.constructor.name,this.statusCode=t,this.code=r,this.details=s,this.originalError=a,this.timestamp=new Date().toISOString(),this.requestId=null,Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack}toJSON(){return{name:this.name,message:this.message,statusCode:this.statusCode,code:this.code,details:this.details,timestamp:this.timestamp,requestId:this.requestId,stack:this.stack}}}class r extends t{constructor(e,t=null){super(e,400,"VALIDATION_ERROR",t)}}class s extends t{constructor(e="Authentication required"){super(e,401,"AUTHENTICATION_ERROR")}}class a extends t{constructor(e){super(e,409,"CONFLICT")}}class n extends t{constructor(e,t=null){super(e,500,"FILE_SYSTEM_ERROR",null,t)}}class o extends t{constructor(e,t=null){super(e,503,"NETWORK_ERROR",null,t)}}class i extends t{constructor(e="Request timeout",t=null){super(e,408,"TIMEOUT_ERROR",t?{timeoutMs:t}:null)}}class l extends t{constructor(e,t=null){super(`File too large. Maximum size is ${function(e){if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}(e)}`,413,"FILE_TOO_LARGE",{maxSize:e,actualSize:t})}}class u extends t{constructor(e=null){super(e?`Invalid file type. Allowed types: ${e.join(", ")}`:"Invalid file type",400,"INVALID_FILE_TYPE",{allowedTypes:e})}}class c extends t{constructor(e,t=null){super(e,500,"PROCESSING_ERROR",null,t)}}async function d(r,s={}){let a={timestamp:new Date().toISOString(),error:r instanceof t?r.toJSON():{name:r.name,message:r.message,stack:r.stack},context:s,environment:"production"};r instanceof t&&r.statusCode<500?console.warn("Client Error:",JSON.stringify(a,null,2)):console.error("Server Error:",JSON.stringify(a,null,2));try{let{default:t}=await e.A(139867),{log:a}=await e.A(970795);await t.trackError(r,s),a.error("Error logged",r,s)}catch(e){console.warn("Error tracker not available:",e.message)}return process.env.ERROR_TRACKING_ENABLED,a}function p(e,t=!1,r=!0){let s={error:e.message||"Internal server error",code:e.code||"INTERNAL_ERROR"};return r&&e.details&&(s.details=e.details),(t||0)&&(s.stack=e.stack),e.requestId&&(s.requestId=e.requestId),e.timestamp&&(s.timestamp=e.timestamp),s}async function E(e,s,a={}){return(await d(e,a),s.headersSent)?void 0:e instanceof t?s.status(e.statusCode).json(p(e,!1,!0)):"ValidationError"===e.name||"CastError"===e.name?s.status(400).json(p(new r(e.message,e.errors),!1)):"ECONNREFUSED"===e.code||"ETIMEDOUT"===e.code?s.status(503).json(p(new o("Database connection failed",e),!1)):"ENOENT"===e.code||"EACCES"===e.code||"EMFILE"===e.code?s.status(500).json(p(new n("File system operation failed",e),!1)):e.message&&(e.message.includes("timeout")||e.message.includes("ETIMEDOUT"))?s.status(408).json(p(new i("Request timeout",e.timeout),!1)):"LIMIT_FILE_SIZE"===e.code||e.message?.includes("too large")?s.status(413).json(p(new l,!1)):void s.status(500).json(p(new t("Internal server error",500,"INTERNAL_ERROR",null,e),!1))}e.s(["AuthenticationError",()=>s,"ConflictError",()=>a,"FileSystemError",()=>n,"FileTooLargeError",()=>l,"InvalidFileTypeError",()=>u,"ProcessingError",()=>c,"TimeoutError",()=>i,"ValidationError",()=>r,"handleApiError",()=>E])},446786,(e,t,r)=>{t.exports=e.x("os",()=>require("os"))},536430,(e,t,r)=>{t.exports=e.x("cloudinary",()=>require("cloudinary"))},389928,e=>{"use strict";var t=e.i(926747),r=e.i(190406),s=e.i(244898),a=e.i(262950),n=e.i(536430),o=e.i(910479),i=e.i(515954);async function l(e,t){if("GET"!==e.method)return t.setHeader("Allow","GET"),t.status(405).json({error:"Method not allowed"});try{let e={CLOUDINARY_CLOUD_NAME:!!process.env.CLOUDINARY_CLOUD_NAME,CLOUDINARY_API_KEY:!!process.env.CLOUDINARY_API_KEY,CLOUDINARY_API_SECRET:!!process.env.CLOUDINARY_API_SECRET,HF_API_TOKEN:!!process.env.HF_API_TOKEN},r=!1,s=null;try{n.v2.config({cloud_name:process.env.CLOUDINARY_CLOUD_NAME,api_key:process.env.CLOUDINARY_API_KEY,api_secret:process.env.CLOUDINARY_API_SECRET});let e=await n.v2.api.ping();r=!!e?.status,s=e?.status||"ok"}catch(e){r=!1,s=e?.message||String(e)}let a=await o.default.runAllChecks(),i=await o.default.getSystemInfo();return t.status(200).json({env:e,cloudinary:{ok:r,message:s},health:{overall:a.overall,timestamp:a.timestamp},system:{platform:i.platform,nodeVersion:i.nodeVersion,memory:i.memory}})}catch(r){return(0,i.handleApiError)(r,t,{endpoint:"/api/diagnostics",method:e.method})}}e.s(["config",0,{api:{bodyParser:!1}},"default",()=>l],884352);var u=e.i(884352),c=e.i(7031),d=e.i(181927),p=e.i(846432);let E=(0,a.hoist)(u,"default"),m=(0,a.hoist)(u,"config"),h=new s.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/diagnostics",pathname:"/api/diagnostics",bundlePath:"",filename:""},userland:u,distDir:".next-build",relativeProjectDir:""});async function R(e,r,s){h.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let a="/api/diagnostics";a=a.replace(/\/index$/,"")||"/";let n=await h.prepare(e,r,{srcPage:a});if(!n){r.statusCode=400,r.end("Bad Request"),null==s.waitUntil||s.waitUntil.call(s,Promise.resolve());return}let{query:o,params:i,prerenderManifest:l,routerServerContext:u}=n;try{let t=e.method||"GET",s=(0,c.getTracer)(),n=s.getActiveScopeSpan(),p=h.instrumentationOnRequestError.bind(h),E=async n=>h.render(e,r,{query:{...o,...i},params:i,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:h.isDev,page:"/api/diagnostics",internalRevalidate:null==u?void 0:u.revalidate,onError:(...t)=>p(e,...t)}).finally(()=>{if(!n)return;n.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=s.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==d.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=e.get("next.route");if(o){let e=`${t} ${o}`;n.setAttributes({"next.route":o,"http.route":o,"next.span_name":e}),n.updateName(e)}else n.updateName(`${t} ${a}`)});n?await E(n):await s.withPropagatedContext(e.headers,()=>s.trace(d.BaseServerSpan.handleRequest,{spanName:`${t} ${a}`,kind:c.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},E))}catch(e){if(h.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==s.waitUntil||s.waitUntil.call(s,Promise.resolve())}}e.s(["config",0,m,"default",0,E,"handler",()=>R],389928)},831636,e=>{e.v(t=>Promise.all(["server/chunks/[externals]_@supabase_supabase-js_71badcb7._.js"].map(t=>e.l(t))).then(()=>t(194131)))},139867,e=>{e.v(e=>Promise.resolve().then(()=>e(545255)))},970795,e=>{e.v(e=>Promise.resolve().then(()=>e(328112)))}];

//# sourceMappingURL=%5Broot-of-the-server%5D__e0814ba0._.js.map