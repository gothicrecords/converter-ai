:root{
  --bg:#0a0e1a;
  --card:#0f1720;
  --card-hover:#1a1f2e;
  --accent:#667eea;
  --accent-hover:#7c8ef5;
  --accent-secondary:#764ba2;
  --text-primary:#e2e8f0;
  --text-secondary:#94a3b8;
  --text-muted:#64748b;
  --border-color:rgba(102, 126, 234, 0.2);
  --border-hover:rgba(102, 126, 234, 0.4);
  --gradient-primary:linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --gradient-secondary:linear-gradient(135deg, #764ba2 0%, #667eea 100%);
  --gradient-success:linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
  --gradient-glow:linear-gradient(135deg, rgba(102, 126, 234, 0.3) 0%, rgba(118, 75, 162, 0.3) 100%);
  --shadow-sm:0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-md:0 4px 16px rgba(0, 0, 0, 0.2);
  --shadow-lg:0 8px 32px rgba(0, 0, 0, 0.3);
  --shadow-glow:0 0 20px rgba(102, 126, 234, 0.3);
  --shadow-glow-lg:0 0 40px rgba(102, 126, 234, 0.4);
}

*{box-sizing:border-box;}

html,body{
  overflow-x:hidden;
  overflow-y:scroll; /* Reserve vertical scrollbar space to prevent width shift */
  -webkit-text-size-adjust:100%;
  text-size-adjust:100%;
  scrollbar-gutter: stable; /* Reserve scrollbar gutter in modern browsers */
  max-width:100vw;
  position:relative;
  scroll-behavior:smooth;
}

/* Performance optimizations */
* {
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;
}

/* GPU acceleration for transforms */
[style*="transform"], [style*="opacity"] {
  will-change:transform, opacity;
  backface-visibility:hidden;
}

/* Optimize image rendering */
img, video {
  content-visibility:auto;
  image-rendering:-webkit-optimize-contrast;
  image-rendering:crisp-edges;
}

/* Reduce layout shifts */
img {
  height:auto;
  max-width:100%;
}

body{
  font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', system-ui, Arial, sans-serif;
  background:linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 50%, #0f1720 100%);
  background-attachment:fixed;
  color:var(--text-primary);
  margin:0;
  min-height:100vh;
  padding:0;
  width:100%;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  text-rendering:optimizeLegibility;
}

.container{
  width:100%;
  max-width:1400px;
  margin:0 auto;
  padding:clamp(24px, 4vw, 48px);
} 

/* Animazioni sono ora centralizzate in animations.css */
/* Manteniamo solo le classi utility specifiche di questo file */

/* Skeleton Loader */
.skeleton{
  background:linear-gradient(90deg, #1e293b 25%, #334155 50%, #1e293b 75%);
  background-size:1000px 100%;
  animation:shimmer 2s infinite linear;
  border-radius:8px;
}

/* Smooth Transitions */
*{
  transition:opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1),
             transform 0.3s cubic-bezier(0.4, 0, 0.2, 1),
             background-color 0.3s ease,
             border-color 0.3s ease,
             box-shadow 0.3s ease;
}

button,a,.btn-primary,.btn-secondary,.btn-download{
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  will-change:transform, box-shadow;
  backface-visibility:hidden;
}

/* Page Header Styles */
.page-header{
  text-align:center;
  margin-bottom:clamp(32px, 5vw, 48px);
  animation:fadeInUp 0.6s ease-out;
}

.header-badge{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding:8px 16px;
  background:rgba(102,126,234,0.15);
  -webkit-backdrop-filter:blur(10px);
  backdrop-filter:blur(10px);
  border:1px solid rgba(102,126,234,0.3);
  border-radius:24px;
  color:#667eea;
  font-size:14px;
  font-weight:600;
  margin-bottom:20px;
  animation:pulse 2s ease-in-out infinite;
  box-shadow:0 4px 12px rgba(102,126,234,0.2);
  transition:all 0.3s ease;
}

.header-badge:hover{
  background:rgba(102,126,234,0.25);
  transform:translateY(-2px);
  box-shadow:0 6px 20px rgba(102,126,234,0.3);
}

.badge-icon{
  width:18px;
  height:18px;
  filter:drop-shadow(0 0 4px rgba(102,126,234,0.5));
}

.page-title{
  margin:0 0 12px;
  font-size:clamp(32px, 6vw, 48px);
  font-weight:900;
  background:var(--gradient-primary);
  background-size:200% 200%;
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  background-clip:text;
  -webkit-background-clip:text; /* Duplicate for Safari compatibility */
  letter-spacing:-0.02em;
  line-height:1.1;
  animation:gradientShift 3s ease infinite;
  text-shadow:0 0 30px rgba(102,126,234,0.3);
}

.page-subtitle{
  font-size:clamp(15px, 2.5vw, 18px);
  color:var(--text-secondary);
  margin:0;
  max-width:600px;
  margin:0 auto;
  line-height:1.7;
  font-weight:400;
}

/* Dropzone */
.dropzone{
  border:2px dashed var(--border-color);
  padding:clamp(32px, 5vw, 48px);
  border-radius:20px;
  text-align:center;
  cursor:pointer;
  position:relative;
  min-height:clamp(240px, 35vh, 320px);
  display:flex;
  align-items:center;
  justify-content:center;
  transition:all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  background:rgba(15,23,42,0.5);
  -webkit-backdrop-filter:blur(16px);
  backdrop-filter:blur(16px);
  box-shadow:var(--shadow-md);
  overflow:hidden;
}

.dropzone::before{
  content:'';
  position:absolute;
  inset:0;
  background:var(--gradient-primary);
  opacity:0;
  transition:opacity 0.4s ease;
  z-index:0;
}

.dropzone:hover{
  border-color:var(--accent);
  background:rgba(102,126,234,0.08);
  transform:translateY(-4px) scale(1.01);
  box-shadow:var(--shadow-lg), var(--shadow-glow);
}

.dropzone:hover::before{
  opacity:0.05;
}

.dropzone-content{
  pointer-events:none;
  position:relative;
  z-index:1;
}

.dropzone-icon{
  width:64px;
  height:64px;
  color:var(--accent);
  margin:0 auto 16px;
  opacity:0.9;
  filter:drop-shadow(0 0 8px rgba(102,126,234,0.4));
  transition:all 0.3s ease;
}

.dropzone:hover .dropzone-icon{
  transform:scale(1.1) rotate(5deg);
  opacity:1;
  filter:drop-shadow(0 0 12px rgba(102,126,234,0.6));
}

.dropzone-text{
  font-size:clamp(15px, 2.5vw, 18px);
  color:var(--text-primary);
  margin:0 0 12px;
  font-weight:600;
  letter-spacing:-0.01em;
}

.file-formats{
  font-size:13px;
  color:var(--text-muted);
  font-weight:500;
}

.dropzone input{
  position:absolute;
  inset:0;
  opacity:0;
  cursor:pointer;
  z-index:2;
}

/* Buttons */
.controls{
  display:flex;
  justify-content:center;
  margin-top:clamp(20px, 3vw, 28px);
  gap:12px;
  flex-wrap:wrap;
}

button,.btn-primary,.btn-secondary,.btn-download{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  border:none;
  cursor:pointer;
  font-weight:600;
  border-radius:12px;
  font-size:clamp(15px, 2.5vw, 16px);
  padding:14px 28px;
  transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-decoration:none;
  position:relative;
  overflow:hidden;
  white-space:nowrap;
  will-change:transform, box-shadow;
  backface-visibility:hidden;
}

button::before,.btn-primary::before,.btn-secondary::before,.btn-download::before{
  content:'';
  position:absolute;
  inset:0;
  background:linear-gradient(135deg, rgba(255,255,255,0.2) 0%, transparent 100%);
  opacity:0;
  transition:opacity 0.3s ease;
}

button:hover::before,.btn-primary:hover::before,.btn-secondary:hover::before,.btn-download:hover::before{
  opacity:1;
}

button:disabled,.btn-primary:disabled{
  opacity:0.5;
  cursor:not-allowed;
  transform:none !important;
}

.btn-primary{
  background:var(--gradient-primary);
  background-size:200% 200%;
  color:#fff;
  box-shadow:var(--shadow-md), var(--shadow-glow);
  font-weight:700;
  letter-spacing:0.01em;
}

.btn-primary:hover:not(:disabled){
  transform:translateY(-3px) scale(1.02);
  box-shadow:var(--shadow-lg), var(--shadow-glow-lg);
  animation:gradientShift 2s ease infinite;
}

.btn-primary:active:not(:disabled){
  transform:translateY(-1px) scale(1);
}

.btn-secondary{
  background:rgba(102,126,234,0.1);
  border:1px solid var(--border-color);
  color:var(--text-primary);
  -webkit-backdrop-filter:blur(10px);
  backdrop-filter:blur(10px);
}

.btn-secondary:hover{
  background:rgba(102,126,234,0.2);
  border-color:var(--accent);
  transform:translateY(-2px);
  box-shadow:var(--shadow-md);
}

.btn-download{
  background:var(--gradient-success);
  background-size:200% 200%;
  color:#fff;
  box-shadow:0 8px 16px rgba(67,233,123,0.3);
  font-weight:700;
}

.btn-download:hover{
  transform:translateY(-3px) scale(1.02);
  box-shadow:0 12px 24px rgba(67,233,123,0.5);
  animation:gradientShift 2s ease infinite;
}

.btn-icon{
  width:20px;
  height:20px;
  transition:transform 0.3s ease;
}

button:hover .btn-icon,.btn-primary:hover .btn-icon{
  transform:translateX(2px);
}

.status{
  margin-top:clamp(16px, 2vw, 20px);
  text-align:center;
  color:var(--text-secondary);
  font-size:clamp(14px, 2vw, 16px);
  min-height:24px;
  padding:14px 20px;
  background:rgba(15,23,42,0.6);
  -webkit-backdrop-filter:blur(10px);
  backdrop-filter:blur(10px);
  border:1px solid var(--border-color);
  border-radius:12px;
  font-weight:500;
  transition:all 0.3s ease;
}

.status:hover{
  background:rgba(15,23,42,0.8);
  border-color:var(--border-hover);
}

/* Mobile Responsive Styles */
@media (max-width: 768px) {
    *{max-width:100% !important;box-sizing:border-box !important;}
    html,body{overflow-x:hidden !important;width:100% !important;position:relative !important;}
    .container{padding:16px;width:100%;max-width:100vw;}
    
    /* Hide desktop menu, show hamburger */
    nav .navMenu{display:none !important;}
    nav .hamburgerBtn{display:flex !important;}
    
    /* Mobile typography */
    .page-title{font-size:24px !important;line-height:1.2 !important;}
    .page-subtitle{font-size:14px !important;line-height:1.5 !important;}
    
    /* Mobile buttons - touch-friendly */
    button,.btn-primary,.btn-secondary{
        font-size:14px;
        padding:12px 20px;
        min-height:44px;
        min-width:44px;
        -webkit-tap-highlight-color:rgba(102, 126, 234, 0.3);
        touch-action:manipulation;
    }
    
    /* Mobile dropzone */
    .dropzone{min-height:180px;padding:20px;}
    .dropzone-icon{width:48px;height:48px;}
    
    /* Mobile grid adjustments */
    .tools-grid{grid-template-columns:1fr !important;gap:16px !important;}
    .features-grid{grid-template-columns:1fr !important;gap:20px !important;}
    
    /* Mobile spacing */
    .hero-section{padding:50px 16px 30px !important;}
    .section{padding:30px 16px !important;}
    
    /* Mobile stats grid */
    .hero-stats{gap:16px !important;}
    
    /* Mobile hero content */
    .mainHero{padding:60px 16px 40px !important;}
    .mainHeroTitle{font-size:28px !important;}
    .mainHeroSubtitle{font-size:15px !important;}
    
    /* Mobile feature cards */
    .featureCard{padding:20px !important;}
    .featureIcon{width:48px !important;height:48px !important;}
    
    /* iOS Safari specific fixes */
    @supports (-webkit-touch-callout: none) {
        body {
            -webkit-overflow-scrolling: touch;
            -webkit-tap-highlight-color: transparent;
        }
        input, textarea, select {
            font-size: 16px !important; /* Prevents zoom on focus in iOS */
        }
    }
    
    /* Android Chrome optimizations */
    * {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
    }
    
    /* Prevent text selection on buttons */
    button, a[role="button"], [role="button"] {
        -webkit-user-select: none;
        user-select: none;
        -webkit-touch-callout: none;
    }
    
    /* Allow text selection on inputs */
    input, textarea {
        -webkit-user-select: text;
        user-select: text;
    }
    
    /* Performance optimizations */
    * {
        will-change: auto;
    }
    
    /* Reduce animations on mobile for better performance */
    @media (prefers-reduced-motion: no-preference) {
        * {
            transition-duration: 0.2s !important;
            animation-duration: 0.3s !important;
        }
    }
}

@media (max-width: 480px) {
    .page-title{font-size:22px !important;}
    .mainHeroTitle{font-size:24px !important;}
    .hero-stats{grid-template-columns:repeat(2, 1fr) !important;}
    .controls{flex-direction:column;width:100%;}
    button,.btn-primary,.btn-secondary{
        width:100%;
        min-height:48px;
    }
    .statValue{font-size:24px !important;}
    .statLabel{font-size:12px !important;}
    
    /* Extra small screens */
    .container{padding:12px;}
    .hero-section{padding:40px 12px 24px !important;}
    .section{padding:24px 12px !important;}
}
.result{margin-top:clamp(24px, 3vw, 32px);text-align:center}

/* Download Actions */
.download-actions{margin-top:24px;display:flex;flex-direction:column;align-items:center;gap:12px}
.open-link{color:#60a5fa;font-size:14px;font-weight:500;text-decoration:none;transition:color 0.2s}
.open-link:hover{color:#93c5fd}

/* Before/After Slider */
.slider{
  position:relative;
  width:100%;
  height:clamp(450px, 80vh, 1100px);
  background:#0b0f18;
  border-radius:20px;
  overflow:hidden;
  cursor:ew-resize;
  box-shadow:var(--shadow-lg), var(--shadow-glow);
  -ms-user-select:none;
  -webkit-user-select:none;
  user-select:none;
  touch-action:none;
  transition:box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  border:1px solid var(--border-color);
}

.slider:hover{
  box-shadow:var(--shadow-lg), var(--shadow-glow-lg);
}

.slider:active{
  box-shadow:0 24px 60px rgba(102,126,234,0.4), 0 0 50px rgba(102,126,234,0.3);
}

.slider img{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:contain;
  background:#000;
  transition:opacity 0.3s ease;
}

.slider .clip{
  position:absolute;
  inset:0;
  overflow:hidden;
}

.slider .divider{
  position:absolute;
  top:0;
  bottom:0;
  width:3px;
  background:linear-gradient(180deg,rgba(255,255,255,0.9) 0%,rgba(255,255,255,1) 50%,rgba(255,255,255,0.9) 100%);
  box-shadow:0 0 12px rgba(255,255,255,0.6), 0 0 20px rgba(102,126,234,0.4);
  filter:drop-shadow(0 0 8px rgba(102,126,234,0.5));
}

.slider .handle{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%, -50%);
  width:clamp(44px, 8vw, 56px);
  height:clamp(44px, 8vw, 56px);
  border-radius:50%;
  background:var(--gradient-primary);
  background-size:200% 200%;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  font-size:clamp(18px, 3vw, 22px);
  box-shadow:0 8px 24px rgba(102,126,234,0.5),0 0 0 4px rgba(255,255,255,0.15), 0 0 20px rgba(102,126,234,0.4);
  pointer-events:none;
  transition:transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation:glowPulse 2s ease-in-out infinite;
}

.slider:active .handle{
  transform:translate(-50%, -50%) scale(1.2);
  animation:glowPulse 1s ease-in-out infinite;
}

.slider .badge{
  position:absolute;
  top:clamp(12px, 2vw, 16px);
  padding:clamp(6px, 1vw, 10px) clamp(10px, 1.5vw, 14px);
  border-radius:999px;
  background:rgba(0,0,0,0.8);
  -webkit-backdrop-filter:blur(16px);
  backdrop-filter:blur(16px);
  color:#fff;
  font-weight:700;
  font-size:clamp(11px, 1.8vw, 14px);
  letter-spacing:.5px;
  border:1px solid rgba(255,255,255,0.2);
  box-shadow:0 4px 12px rgba(0,0,0,0.3);
  transition:all 0.3s ease;
}

.slider .badge:hover{
  background:rgba(0,0,0,0.9);
  transform:translateY(-2px);
  box-shadow:0 6px 16px rgba(0,0,0,0.4);
}

.slider .badge.left{
  left:clamp(12px, 2vw, 16px);
}

.slider .badge.right{
  right:clamp(12px, 2vw, 16px);
}

@media (max-width: 768px){
	.controls{flex-direction:column;width:100%;max-width:400px;margin-left:auto;margin-right:auto}
	button,.btn-primary,.btn-download{width:100%}
	.download-actions{width:100%;max-width:400px}
}

@media (hover: none) and (pointer: coarse) {
	.slider{cursor:grab}
	.slider:active{cursor:grabbing}
}
